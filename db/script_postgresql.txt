-- Database: eleicaoteste

-- DROP DATABASE IF EXISTS eleicaoteste;

CREATE DATABASE eleicaoteste
    WITH
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'Portuguese_Brazil.1252'
    LC_CTYPE = 'Portuguese_Brazil.1252'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1
    IS_TEMPLATE = False;

-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.candidate
(
    candidate_id bigint NOT NULL,
    cpf character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default",
    "number" bigint,
    party character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT candidate_pkey PRIMARY KEY (candidate_id)
);

CREATE TABLE IF NOT EXISTS public.collaborator
(
    collaborator_id bigint NOT NULL,
    cpf character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default",
    session_id bigint,
    CONSTRAINT collaborator_pkey PRIMARY KEY (collaborator_id)
);

CREATE TABLE IF NOT EXISTS public.session
(
    session_id bigint NOT NULL,
    "number" bigint,
    urn_number bigint NOT NULL,
    zone_id bigint NOT NULL,
    CONSTRAINT session_pkey PRIMARY KEY (session_id)
);

CREATE TABLE IF NOT EXISTS public.vote
(
    vote_id bigint NOT NULL,
    "number" bigint,
    CONSTRAINT vote_pkey PRIMARY KEY (vote_id)
);

CREATE TABLE IF NOT EXISTS public.vote_session
(
    vote_id bigint NOT NULL,
    session_id bigint NOT NULL
);

CREATE TABLE IF NOT EXISTS public.voter
(
    voter_id bigint NOT NULL,
    cpf character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default",
    status_vote boolean,
    session_id bigint NOT NULL,
    CONSTRAINT voter_pkey PRIMARY KEY (voter_id)
);

CREATE TABLE IF NOT EXISTS public.zone
(
    zone_id bigint NOT NULL,
    "number" bigint,
    CONSTRAINT zone_pkey PRIMARY KEY (zone_id)
);

ALTER TABLE IF EXISTS public.collaborator
    ADD CONSTRAINT fk9as03qtc49v86tm2e4hc2pjto FOREIGN KEY (session_id)
    REFERENCES public.session (session_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.session
    ADD CONSTRAINT fkb8b8fsl43hia2qcsk2x6onbou FOREIGN KEY (zone_id)
    REFERENCES public.zone (zone_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vote_session
    ADD CONSTRAINT fk72vo815oseatujv25t3y6atyl FOREIGN KEY (vote_id)
    REFERENCES public.vote (vote_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vote_session
    ADD CONSTRAINT fksi163qb818a2k1y9ape7deu0v FOREIGN KEY (session_id)
    REFERENCES public.session (session_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.voter
    ADD CONSTRAINT fkpg35vwy9ll3adgqa92cx71vnp FOREIGN KEY (session_id)
    REFERENCES public.session (session_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;